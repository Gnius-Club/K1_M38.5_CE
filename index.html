<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playbook - MisiÃ³n 38.5</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .header {
            background-color: #5DADE2; /* Azul Gnius */
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 8px 8px 0 0;
        }
        .header h1 {
            margin: 0;
            font-size: 1.8em;
        }
        .banner {
            background-color: #85C1E9; /* Azul mÃ¡s claro */
            color: #333;
            padding: 15px;
            cursor: pointer;
            margin-bottom: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .banner:hover {
            background-color: #AED6F1;
        }
        .banner .title {
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .banner .subtitle {
            font-size: 1em;
            margin-top: 8px;
            border-top: 1px solid #fff;
            padding-top: 8px;
            color: #1A5276; /* Azul oscuro texto */
        }
        .content {
            display: none;
            padding: 15px;
            border: 1px solid #ddd;
            margin-bottom: 10px;
            background-color: #EAF2F8; /* Azul muy claro fondo */
            border-radius: 5px;
        }
        .dialogue {
            background-color: #FEF9E7; /* Amarillo pÃ¡lido para diÃ¡logo */
            border: 1px solid #FAD7A0;
            border-radius: 10px;
            padding: 10px 15px;
            margin: 15px 0;
            text-align: left; /* Cambiado a izquierda para mejor lectura */
            font-style: italic;
            color: #784212; /* MarrÃ³n oscuro texto */
            position: relative; /* Para el bocadillo */
            border-left: 5px solid #F39C12; /* Naranja */
        }

        .dropdown {
            margin-bottom: 25px;
            text-align: center; /* Centrar dropdown */
        }
        .dropdown label {
            font-weight: bold;
            color: #1A5276;
        }
        .dropdown select {
            font-size: 1.1em;
            padding: 8px 12px;
            margin-left: 10px;
            border-radius: 5px;
            border: 1px solid #85C1E9;
        }
        table { width: 100%; border-collapse: collapse; margin-top: 10px;}
        td { padding: 12px; border: 1px solid #AED6F1; vertical-align: top; }
        td strong { color: #1A5276; }
        .level-title { /* Clase especÃ­fica para el tÃ­tulo del nivel */
             text-align: center;
             color: #5DADE2;
             font-size: 1.4em;
             margin-bottom: 20px;
        }
        /* Clases para ocultar/mostrar contenido por nivel */
        .k1-content, .k2-content, .k3-content { display: none; }
         .activity.active .banner {
             background-color: #AED6F1; /* Slightly different color when active */
         }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Playbook - MisiÃ³n 38.5: Â¡Descifrando el Mensaje del EspÃ­a Zorp!</h1>
        </div>

        <div class="dropdown">
            <label for="class-level">Nivel:</label>
            <select id="class-level" onchange="updateContent()">
                <option value="K1">K1 (3 aÃ±os)</option>
                <option value="K2">K2 (4 aÃ±os)</option>
                <option value="K3">K3 (5 aÃ±os)</option>
            </select>
        </div>

        <h2 id="selected-level" class="level-title">Nivel: K1 (3 aÃ±os)</h2>

        <!-- ............................................AquÃ­ empezarÃ¡n las actividades........................................... -->

<!-- Actividad 0: RevisiÃ³n de Materiales -->
<div id="activity-0" class="activity">
    <div class="banner" onclick="toggleContent('revision_materiales')">
        <div class="title">ğŸ“š Actividad 0: RevisiÃ³n de Materiales</div>
        <div class="subtitle">Objetivo: Asegurarse de que todos los materiales necesarios para la clase estÃ©n disponibles y preparados antes de que lleguen los niÃ±os.</div>
    </div>
    <div id="revision_materiales" class="content">
        <table>
            <tr>
                <td><strong>PASO 1 (N/A):</strong> Revisa que tengas listos los materiales indicados en la **DIAPOSITIVA 1**: 1 Set LEGO Coding Express (tren, vÃ­as rectas/curvas, ladrillos acciÃ³n rojo, azul, amarillo, blanco, verde) y 10 iBricks por cada pareja. Pre-montar las vÃ­as con los patrones incompletos/incorrectos segÃºn el nivel antes de la clase.</td>
                <td><strong>DIÃLOGO SUGERIDO:</strong> N/A</td>
            </tr>
        </table>
    </div>
</div>

<!-- Actividad 1: Bienvenida e IntroducciÃ³n -->
<div id="activity-1" class="activity">
    <div class="banner" onclick="toggleContent('bienvenida')">
        <div class="title">ğŸ‰ Actividad 1: Â¡Mensaje Secreto Interceptado! â° Tiempo: 1 minuto</div>
        <div class="subtitle">Objetivo: Introducir la idea de mensajes codificados, patrones secretos y la posibilidad de errores o partes faltantes.</div>
    </div>
    <div id="bienvenida" class="content">
        <table>
            <tr>
                <td><strong>PASO 1 (0.5 minutos):</strong> Reproduce la **DIAPOSITIVA 2** â€œBienvenidaâ€. Saluda al CODE SQUAD como si fueran agentes secretos y habla sobre mensajes codificados.</td>
                <td>
                    <div class="dialogue">
                        "Â¡AtenciÃ³n, agentes secretos del CODE SQUAD! Â¡Tenemos una transmisiÃ³n urgente! Â¿Saben quÃ© son los mensajes secretos? Â¡Son mensajes escondidos que solo los espÃ­as inteligentes pueden entender! Usan cÃ³digos y patrones especiales."
                    </div>
                </td>
            </tr>
            <tr>
                <td><strong>PASO 2 (0.5 minutos):</strong> Reproduce la **DIAPOSITIVA 3** "Gimnasio CODE SQUAD". Explica que a veces los mensajes secretos llegan con errores o partes borradas y hay que ser detective para descifrarlos.</td>
                <td>
                     <div class="dialogue">
                        "Â¡Pero a veces, cuando se envÃ­a un mensaje secreto muy rÃ¡pido, algunas partes se borran o se mezclan! Â¡Llega incompleto o con errores! Â¡Y solo los mejores detectives de cÃ³digos pueden encontrar el error, descubrir el patrÃ³n secreto y arreglar el mensaje! Â¡Vamos al Gimnasio Cerebral a entrenar nuestros ojos de lince para encontrar patrones escondidos y arreglar cÃ³digos secretos!"
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<!-- Actividad 2: Baile de Algoritmos -->
<div id="activity-2" class="activity">
    <div class="banner" onclick="toggleContent('baile-algoritmos')">
        <div class="title">ğŸ¶ Actividad 2: Baile de Algoritmos â° Tiempo: 2 minutos</div>
        <div class="subtitle">Objetivo: Practicar la identificaciÃ³n de secuencias y la anticipaciÃ³n del siguiente paso.</div>
    </div>
    <div id="baile-algoritmos" class="content">
        <table>
            <tr>
                <td><strong>PASO 1 (2 minutos):</strong> Reproduce la **DIAPOSITIVA 4** â€œBaile de Algoritmosâ€. GuÃ­a el baile, quizÃ¡s deteniÃ©ndote antes del Ãºltimo paso de una secuencia repetida y preguntando "Â¿QuÃ© creen que sigue?".</td>
                 <td>
                     <div class="dialogue">
                        "Â¡Este baile es un cÃ³digo en movimiento! Â¡Tiene un patrÃ³n secreto! Â¡Adelante, giro, aplauso... Adelante, giro... Â¿QuÃ© sigue? Â¡Aplauso! Â¡Hay que estar atentos para saber cÃ³mo termina la secuencia! Â¡AsÃ­ practicamos para descifrar el mensaje secreto!"
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<!-- Actividad 3: Planteamiento del Problema - Â¡El Mensaje del EspÃ­a Zorp! -->
<div id="activity-3" class="activity">
    <div class="banner" onclick="toggleContent('planteamiento-problema')">
        <div class="title">ğŸ‘¾ Actividad 3: Â¡El CÃ³digo Confuso de Zorp! â° Tiempo: 3 minutos</div>
        <div class="subtitle">Objetivo: Presentar la historia del mensaje interceptado, la necesidad de descifrarlo (corregir el patrÃ³n) para encontrar los cristales, y el rol del tren.</div>
    </div>
    <div id="planteamiento-problema" class="content">
        <table>
            <tr>
                <td><strong>PASO 1 (1.5 minutos):</strong> Reproduce la **DIAPOSITIVA 5**. Narra la historia del agente Zorp en el Planeta Zirconia y su mensaje interceptado sobre cristales de energÃ­a.</td>
                <td>
                     <div class="dialogue">
                        "Â¡Agentes CODE SQUAD! Â¡Hemos interceptado un mensaje secreto de nuestro mejor espÃ­a, el Agente Zorp, desde el lejano Planeta Zirconia! Â¡Zorp ha encontrado la ubicaciÃ³n de unos cristales de energÃ­a sÃºper poderosos que necesitamos para el cuartel general! Â¡Pero enviÃ³ el mensaje con un cÃ³digo secreto para que nadie mÃ¡s lo entendiera!"
                    </div>
                </td>
            </tr>
            <tr>
                <td><strong>PASO 2 (1.5 minutos):</strong> Reproduce la **DIAPOSITIVA 6**. Explica el reto: El mensaje es un patrÃ³n de seÃ±ales (ladrillos de acciÃ³n) en una vÃ­a, pero llegÃ³ daÃ±ado (incompleto o con errores). Hay que analizarlo, encontrar la regla del patrÃ³n, corregirlo/completarlo, y luego enviar al Coding Express por la ruta correcta para recoger los cristales (iBricks).</td>
                <td>
                     <div class="dialogue">
                        "Â¡El mensaje de Zorp es un camino codificado! Â¡Una secuencia de seÃ±ales (nuestros ladrillos de acciÃ³n) que marca la ruta exacta a los cristales! Pero Â¡oh, no! Â¡Parece que la transmisiÃ³n se cortÃ³ o hubo interferencia! Â¡El patrÃ³n estÃ¡ incompleto o tiene seÃ±ales equivocadas! Â¡No podemos enviar al Coding Express asÃ­, se perderÃ­a! Nuestro reto, sÃºper detectives, es: **Primero**, mirar con atenciÃ³n la vÃ­a con el mensaje daÃ±ado. **Segundo**, descubrir cuÃ¡l es el patrÃ³n secreto que Zorp querÃ­a usar. **Tercero**, Â¡corregir los errores! Quitar los ladrillos incorrectos o poner los que faltan. **Cuarto**, una vez arreglado el cÃ³digo, Â¡enviaremos al Coding Express por la ruta correcta para recoger los Cristales de EnergÃ­a (que marcaremos con bloques)! Â¿Listos para descifrar?"
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<!-- Actividad 4: FormaciÃ³n de Parejas -->
<div id="activity-4" class="activity">
    <div class="banner" onclick="toggleContent('formacion-parejas')">
        <div class="title">ğŸ¤ Actividad 4: Â¡Equipos de Descifradores! â° Tiempo: 3 minutos</div>
        <div class="subtitle">Objetivo: Formar parejas para analizar, depurar y completar juntos el patrÃ³n codificado.</div>
    </div>
    <div id="formacion-parejas" class="content">
        <table>
            <tr>
                <td><strong>PASO 1 (2 minutos):</strong> Reproduce la **DIAPOSITIVA 7** â€œFormaciÃ³n de Equiposâ€. Explica que descifrar cÃ³digos secretos es un trabajo para mentes brillantes trabajando juntas. Forma las parejas.</td>
                <td>
                     <div class="dialogue">
                        "Â¡Descifrar cÃ³digos confusos necesita de los mejores agentes secretos! Â¡Y dos agentes trabajando en equipo pueden encontrar pistas que uno solo podrÃ­a pasar por alto! Â¡Formen sus Equipos de Descifradores para resolver el misterio del mensaje de Zorp!"
                    </div>
                </td>
            </tr>
            <tr>
                <td><strong>PASO 2 (1 minuto):</strong> Verifica que todos tengan pareja. Prepara las vÃ­as pre-montadas con los patrones errÃ³neos/incompletos para cada nivel y ten listos los ladrillos correctos para el intercambio/aÃ±adido.</td>
                <td>
                     <div class="dialogue">
                        "Â¿Listos, Descifradores? Â¡Cada equipo recibirÃ¡ una copia del mensaje daÃ±ado de Zorp (la vÃ­a con los ladrillos)! Â¡TendrÃ¡n que usar sus habilidades de detective para encontrar el patrÃ³n y arreglarlo! Â¡Preparen sus lupas!"
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<!-- Actividad 5: Reto de CodificaciÃ³n - Â¡Analiza y Corrige el CÃ³digo Secreto! -->
<div id="activity-5" class="activity">
    <div class="banner" onclick="toggleContent('reto-codificacion')">
        <div class="title">ğŸ”§ Actividad 5: Â¡Reparando el Mensaje de Zorp! â° Tiempo: 10 minutos</div>
        <div class="subtitle">Objetivo: Analizar la secuencia presentada, identificar el patrÃ³n subyacente, detectar el error o la omisiÃ³n, y corregirlo aÃ±adiendo/cambiando el ladrillo de acciÃ³n adecuado.</div>
    </div>
    <div id="reto-codificacion" class="content">
        <table>
             <!-- Paso 1: Observar el PatrÃ³n DaÃ±ado -->
             <tr>
                <td><strong>PASO 1 (3 minutos):</strong> Reproduce la **DIAPOSITIVA 8** "Â¡El CÃ³digo Confuso!". Entrega/muestra a cada pareja la vÃ­a pre-montada con el patrÃ³n daÃ±ado de su nivel. Pide que observen los ladrillos y el orden.</td>
                 <td>
                     <div class="dialogue">
                        "Â¡Agentes, aquÃ­ estÃ¡ el mensaje daÃ±ado de Zorp! Â¡Miren con mucha atenciÃ³n los ladrillos de colores en la vÃ­a! Â¿QuÃ© colores ven? Â¿En quÃ© orden estÃ¡n? Â¿Notan algo raro? Â¿Algo que parece que se repite pero luego cambia? Â¡Observen como detectives!"
                    </div>
                </td>
            </tr>
            <!-- Paso 2: Identificar Regla y Corregir (EspecÃ­fico por Nivel) -->
             <!-- K1 -->
            <tr class="k1-content">
                <td><strong>PASO 2 - K1 (7 minutos):</strong> Reproduce la **DIAPOSITIVA 9** "CÃ³digo K1: Falta un Azul". VÃ­a: Rojo - Azul - Rojo - [ESPACIO]. PatrÃ³n=A-B. Pregunta: "Vemos Rojo(A)-Azul(B)-Rojo(A)... Â¿QuÃ© falta para seguir el patrÃ³n A-B?". GuÃ­a para aÃ±adir 1 ladrillo AZUL. Marcar destino con iBricks ("Cristales K1").</td>
                 <td>
                     <div class="dialogue">
                        "Â¡Equipo K1! Miren su cÃ³digo: Rojo, Azul, Rojo... Â¡y un hueco! Parece que el patrÃ³n es A-B, A-B... Rana(A)-PÃ¡jaro(B), Rana(A)... Â¿QuÃ© pÃ¡jaro falta? (Espera respuesta: Â¡Azul!). Â¡Exacto! Â¡El mensaje se cortÃ³! Tomen un ladrillo AZUL y pÃ³nganlo en el espacio vacÃ­o. Â¡Ahora pongan unos bloques al final para marcar dÃ³nde estÃ¡n los Cristales K1!"
                    </div>
                </td>
            </tr>
             <!-- K2 -->
             <tr class="k2-content">
                 <td><strong>PASO 2 - K2 (7 minutos):</strong> Reproduce la **DIAPOSITIVA 10** "CÃ³digo K2: SeÃ±al Equivocada y Falta Rojo". VÃ­a con curva: Rojo-Azul-Amarillo-Rojo-AZUL- [ESPACIO]. PatrÃ³n=A-B-C. Error: El 5Âº ladrillo es AZUL pero deberÃ­a ser AMARILLO (C). Falta: El Ãºltimo debe ser ROJO (A). GuÃ­a para cambiar el 5Âº Azul por Amarillo, y aÃ±adir 1 Rojo al final. Marcar destino "Cristales K2".</td>
                 <td>
                     <div class="dialogue">
                        "Â¡Detectives K2! Su cÃ³digo es mÃ¡s largo: Rojo-Azul-Amarillo-Rojo... Â¡y luego un Azul y un hueco! Â¡QuÃ© lÃ­o! Â¿CuÃ¡l creen que es el patrÃ³n secreto? Â¡A-B-C! Â¡Rojo-Azul-Amarillo! Si despuÃ©s del segundo Rojo(A) deberÃ­a seguir B y C... Â¿EstÃ¡ bien ese Azul que sigue? (Espera resp: Â¡No! Â¡DeberÃ­a ser Amarillo/C!). Â¡Correcto! Â¡Cambien ese Azul por un AMARILLO! Y ahora, despuÃ©s de A-B-C, Â¿quÃ© tocarÃ­a para repetir? (Espera resp: Â¡A/Rojo!). Â¡Falta el Rojo al final! Â¡AÃ±adan un ladrillo ROJO! Â¡Pongan bloques al final para los Cristales K2!"
                    </div>
                </td>
            </tr>
             <!-- K3 -->
             <tr class="k3-content">
                 <td><strong>PASO 2 - K3 (7 minutos):</strong> Reproduce la **DIAPOSITIVA 11** "CÃ³digo K3: Errores y Omisiones". VÃ­a compleja: Rojo-Azul-Azul-VERDE-Rojo-Azul-[ESPACIO]-VERDE. PatrÃ³n=A-BB-C (Rojo-Azul-Azul-Verde). Errores: El 4Âº es Verde pero deberÃ­a ser Rojo (A). Falta: DespuÃ©s del 2Âº Azul falta otro Azul (B) y al final falta el Verde (C). GuÃ­a para cambiar el 1er Verde por Rojo, aÃ±adir 1 Azul y 1 Verde. Marcar destino "Cristales K3".</td>
                 <td>
                     <div class="dialogue">
                        "Â¡Agentes expertos K3! Â¡Este cÃ³digo estÃ¡ muy daÃ±ado! Rojo-Azul-Azul-Verde-Rojo-Azul-Hueco-Verde... Â¡Uf! Â¿CuÃ¡l serÃ¡ el patrÃ³n? Â¡QuizÃ¡s A-BB-C! Rojo(A)-Azul(B)-Azul(B)-Verde(C). Veamos... Â¿El cuarto ladrillo, ese Verde, encaja? Si es A-BB-C, despuÃ©s de Rojo-Azul-Azul deberÃ­a venir Â¡Verde! Â¡Ah, no! Â¡El patrÃ³n parece ser A-BB, A-BB...! Â¡Rojo-Azul-Azul! Entonces, despuÃ©s del primer Rojo-Azul-Azul, Â¿quÃ© deberÃ­a seguir? Â¡OTRO ROJO! Â¡Ese Verde estÃ¡ mal! Â¡CÃ¡mbienlo por un ROJO! Ahora tenemos R-A-A-R-A... Â¿QuÃ© falta despuÃ©s de la A? Â¡BB! Â¡Falta un AZUL! PÃ³nganlo en el hueco. Y al final, Â¿quÃ© venÃ­a despuÃ©s de A-BB? Â¡Nada! Â¡Ah, pero Zorp puso un Verde al final! Â¡QuizÃ¡s el patrÃ³n era A-BB-C y lo que falta es la C al final! Â¡AÃ±adan el VERDE! Â¡Pongan bloques para los Cristales K3!"
                        *CorrecciÃ³n interna durante el diÃ¡logo para llegar al patrÃ³n A-BB-C y arreglarlo.*
                        *DiÃ¡logo ajustado K3:* "Â¡Agentes expertos K3! Â¡Este cÃ³digo estÃ¡ muy daÃ±ado! Rojo-Azul-Azul-VERDE-Rojo-Azul-[ESPACIO]-VERDE... Â¡Uf! Â¿CuÃ¡l serÃ¡ el patrÃ³n? Â¡QuizÃ¡s A-BB-C! Rojo(A)-Azul(B)-Azul(B)-Verde(C). Veamos... Â¿El cuarto ladrillo, ese Verde, encaja si el patrÃ³n es A-BB-C? Â¡SÃ­! Entonces A-BB-C. Luego empieza de nuevo con Rojo(A)-Azul(B)... Â¿QuÃ© falta despuÃ©s de la B? Â¡Otra B! Â¡Falta un AZUL! PÃ³nganlo en el hueco. Y despuÃ©s de A-BB... Â¿quÃ© viene? Â¡La C! Â¡Falta un VERDE al final! Â¡AÃ±adan el AZUL y el VERDE! Â¡Pongan bloques para los Cristales K3!"

                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<!-- Actividad 6: Â¡Verificando el CÃ³digo Descifrado! -->
<div id="activity-6" class="activity">
    <div class="banner" onclick="toggleContent('probando-codigo')">
        <div class="title">âœ… Actividad 6: Â¡Probando la Ruta a los Cristales! â° Tiempo: 7 minutos</div>
        <div class="subtitle">Objetivo: Ejecutar el tren sobre la vÃ­a CORREGIDA y verificar que la secuencia de acciones ahora sigue el patrÃ³n identificado y llega al destino (cristales).</div>
    </div>
    <div id="probando-codigo" class="content">
        <table>
             <!-- K1 -->
            <tr class="k1-content">
                <td><strong>PASO 1 - K1 (7 minutos):</strong> Reproduce la **DIAPOSITIVA 12** "Â¡Ruta K1 Descifrada!". GuÃ­a para probar el tren en la vÃ­a corregida (Rojo-Azul-Rojo-Azul). Observar si realiza la secuencia A-B-A-B y llega a los Cristales K1.</td>
                 <td>
                     <div class="dialogue">
                        "Â¡Equipo K1! Â¡Mensaje arreglado! Â¡Pongan al Coding Express al inicio! Â¡EmpujÃ³n! Veamos si sigue el patrÃ³n A-B-A-B: Â¿Rojo? Â¿Azul? Â¿Rojo? Â¿Azul? Â¡Y llegÃ³ a los Cristales K1! Â¡Lo lograron! Â¡Descifraron el cÃ³digo!"
                    </div>
                </td>
            </tr>
             <!-- K2 -->
             <tr class="k2-content">
                 <td><strong>PASO 1 - K2 (7 minutos):</strong> Reproduce la **DIAPOSITIVA 13** "Â¡Ruta K2 Correcta!". GuÃ­a para probar el tren (Rojo-Azul-Amarillo-Rojo-Amarillo-Rojo). Observar si realiza la secuencia A-B-C-A-C-A (o A-B-C-A-B-C si se ajustÃ³ la lÃ³gica K3 al K2). Verificar que llega a Cristales K2. *Ajuste*: Se usarÃ¡ el patrÃ³n A-B-C. Ruta: R-A-Y-R-A-Y.</td>
                 <td>
                     <div class="dialogue">
                        "Â¡Detectives K2! Â¡CÃ³digo corregido! Â¡Tren al inicio! Â¡EmpujÃ³n! El patrÃ³n era A-B-C. Veamos si hace: Â¿Rojo(A)-Azul(B)-Amarillo(C)... y otra vez... Rojo(A)-Azul(B)-Amarillo(C)? Â¡SÃ­! Â¡Y llegÃ³ a los Cristales K2! Â¡Excelente trabajo de depuraciÃ³n!"
                    </div>
                </td>
            </tr>
             <!-- K3 -->
             <tr class="k3-content">
                 <td><strong>PASO 1 - K3 (7 minutos):</strong> Reproduce la **DIAPOSITIVA 14** "Â¡Ruta K3 Asegurada!". GuÃ­a para probar el tren (Rojo-Azul-Azul-Verde-Rojo-Azul-Azul-Verde). Observar si realiza el patrÃ³n A-BB-C dos veces. Verificar llegada a Cristales K3.</td>
                 <td>
                     <div class="dialogue">
                        "Â¡Maestros K3! Â¡El cÃ³digo final! Â¡Tren al inicio! Â¡EmpujÃ³n! El patrÃ³n era A-BB-C. Verifiquemos: Â¿Rojo(A)-Azul(B)-Azul(B)-Verde(C)... y de nuevo... Rojo(A)-Azul(B)-Azul(B)-Verde(C)? Â¡SÃ­! Â¡Una secuencia larga y compleja, perfectamente descifrada y corregida! Â¡Llegaron a los Cristales K3! Â¡Son los mejores agentes!"
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<!-- Actividad 7 OMITIDA -->

<!-- Actividad 8: ConclusiÃ³n y ReflexiÃ³n -->
<div id="activity-8" class="activity">
    <div class="banner" onclick="toggleContent('conclusion-reflexion')">
        <div class="title">ğŸ Actividad 8: Â¡Cristales Recuperados, Mensaje Descifrado! â° Tiempo: 5 minutos</div>
        <div class="subtitle">Objetivo: Celebrar el Ã©xito en la depuraciÃ³n de patrones, reforzar la importancia de identificar la regla subyacente y corregir errores para lograr el objetivo.</div>
    </div>
    <div id="conclusion-reflexion" class="content">
        <table>
            <tr>
                <td><strong>PASO 1 (5 minutos):</strong> Reproduce la **DIAPOSITIVA 15** "Â¡MisiÃ³n Cumplida!". ReÃºne al grupo, felicita por descifrar el mensaje y encontrar los cristales. Realiza preguntas sobre el proceso de encontrar y corregir.</td>
                <td>
                    <div class="dialogue">
                        "Â¡MISIÃ“N CUMPLIDA, agentes descifradores del CODE SQUAD! Â¡Han corregido el mensaje secreto del Agente Zorp y han guiado al Coding Express hasta los valiosos Cristales de EnergÃ­a! Â¡El cuartel general estÃ¡ a salvo gracias a ustedes! Pensemos en nuestro trabajo de detectives:
1. Â¿QuÃ© fue lo mÃ¡s difÃ­cil de encontrar en el mensaje daÃ±ado? (Â¡El error! Â¡La parte que faltaba!)
2. Â¿CÃ³mo supimos cuÃ¡l era el patrÃ³n correcto o quÃ© ladrillo faltaba? (Â¡Miramos lo que se repetÃ­a! Â¡Encontramos la regla secreta del patrÃ³n!)
3. Â¿Fue importante arreglar el cÃ³digo antes de enviar al tren? Â¿Por quÃ©? (Â¡SÃ­, para que no se perdiera! Â¡Para que llegara al lugar correcto!)
Â¡Hoy nos convertimos en expertos cazadores de errores y descifradores de cÃ³digos! Aprendimos que incluso cuando un mensaje o un plan tiene problemas, si observamos con atenciÃ³n y encontramos el patrÃ³n, Â¡podemos arreglarlo! Â¡Son brillantes resolviendo misterios! Â¡Hasta la prÃ³xima misiÃ³n secreta!"
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

        <!-- ............................................AquÃ­ terminarÃ¡n las actividades........................................... -->

    </div>

<script>
    function toggleContent(id) {
        var content = document.getElementById(id);
        var parentActivity = content.closest('.activity'); // Encuentra el contenedor de la actividad
        if (content.style.display === "block") {
            content.style.display = "none";
            parentActivity.classList.remove('active'); // Remueve clase activa si se cierra
        } else {
             // Opcional: Cierra otros contenidos abiertos antes de abrir uno nuevo
             // closeAllContents();
            content.style.display = "block";
            parentActivity.classList.add('active'); // AÃ±ade clase activa si se abre
        }
    }

    // FunciÃ³n opcional para cerrar todos los demÃ¡s contenidos al abrir uno
    /*
    function closeAllContents() {
        var allContents = document.querySelectorAll('.content');
        var allActivities = document.querySelectorAll('.activity');
        allContents.forEach(function(content) {
            content.style.display = 'none';
        });
         allActivities.forEach(function(activity) {
             activity.classList.remove('active');
         });
    }
    */

    function updateContent() {
        var level = document.getElementById("class-level").value;
        // Actualiza el texto del tÃ­tulo H2
        var levelText = document.getElementById("class-level").options[document.getElementById("class-level").selectedIndex].text;
        document.getElementById("selected-level").innerText = "Nivel: " + levelText;

        // Oculta todas las filas de contenido especÃ­fico de nivel primero
        var k1Contents = document.querySelectorAll('.k1-content');
        var k2Contents = document.querySelectorAll('.k2-content');
        var k3Contents = document.querySelectorAll('.k3-content');

        k1Contents.forEach(function(el) { el.style.display = 'none'; });
        k2Contents.forEach(function(el) { el.style.display = 'none'; });
        k3Contents.forEach(function(el) { el.style.display = 'none'; });

        // Muestra solo las filas del nivel seleccionado
        // Usamos 'table-row' porque estamos mostrando/ocultando filas de tabla (<tr>)
        var selectedContents = document.querySelectorAll('.' + level.toLowerCase() + '-content');
        selectedContents.forEach(function(el) {
             // Importante: Necesitamos asegurarnos de que el display sea correcto para filas de tabla
             if (el.tagName === 'TR') {
                 el.style.display = 'table-row';
             } else {
                 // Si por alguna razÃ³n hay otros elementos, usar 'block' o ajustar segÃºn sea necesario
                 el.style.display = 'block';
             }
        });
    }

    // Asegura que updateContent se ejecute cuando la pÃ¡gina cargue
    document.addEventListener('DOMContentLoaded', function() {
        updateContent();
    });
</script>

</body>
</html>